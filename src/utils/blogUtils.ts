import { marked } from 'marked';
import matter from 'gray-matter';
import type { BlogPost, BlogPostMetadata } from '../types/blog';

// Calculate reading time based on word count (average 200 words per minute)
export function calculateReadingTime(content: string): number {
  const wordsPerMinute = 200;
  const words = content.trim().split(/\s+/).length;
  return Math.ceil(words / wordsPerMinute);
}

// Parse markdown content with frontmatter
export function parseMarkdownPost(markdownContent: string, slug: string): BlogPost {
  const { data: frontmatter, content } = matter(markdownContent);

  // Parse markdown to HTML
  const htmlContent = marked(content) as string;

  const readingTime = calculateReadingTime(content);

  return {
    slug,
    title: frontmatter.title || 'Untitled',
    description: frontmatter.description || '',
    content: htmlContent,
    publishedAt: frontmatter.publishedAt || new Date().toISOString(),
    updatedAt: frontmatter.updatedAt,
    thumbnail: frontmatter.thumbnail,
    author: {
      name: frontmatter.author?.name || 'Vifa Digital',
      avatar: frontmatter.author?.avatar,
    },
    tags: frontmatter.tags || [],
    readingTime,
    seo: frontmatter.seo || {
      title: frontmatter.title,
      description: frontmatter.description,
      ogImage: frontmatter.thumbnail,
    },
  };
}

// Format date for display
export function formatDate(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString('ka-GE', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}

// Generate excerpt from content
export function generateExcerpt(content: string, maxLength: number = 150): string {
  // Remove HTML tags and get plain text
  const plainText = content.replace(/<[^>]*>/g, '');

  if (plainText.length <= maxLength) {
    return plainText;
  }

  return plainText.substring(0, maxLength).trim() + '...';
}

// Blog posts data - will be populated with real content
export const blogPosts: BlogPost[] = [
  {
    slug: 'biznesis-cifruli-transformacia',
    title: 'ბიზნესის ციფრული ტრანსფორმაცია – თანამედროვე სამყაროს გამოწვევა',
    description: 'დღევანდელ სწრაფად ცვალებად ბიზნეს-სივრცეში, ციფრული ტრანსფორმაცია აღარ არის მხოლოდ ტექნოლოგიური სიახლე – ეს აუცილებელი სტრატეგიაა.',
    content: `
      <p class="lead">დღევანდელ, სწრაფად ცვალებად ბიზნეს გარემოში, ციფრული ტრანსფორმაცია აღარ წარმოადგენს მხოლოდ ტექნოლოგიურ ინოვაციას – ეს აუცილებელი სტრატეგიული ნაბიჯია. მომხმარებლები უმეტესად ონლაინ სივრცეში ეძებენ ინფორმაციას, აკეთებენ შედარებებს და იღებენ გადაწყვეტილებებს, ამიტომ კომპანიები რომლებიც არ არიან ციფრულ სივრცეში, უპირატესობას მარტივად კარგავენ კონკურენციის პირობებში.</p>

      <h2>რას გულისხმობს ციფრული ტრანსფორმაცია?</h2>

      <p>ციფრული ტრანსფორმაცია არის პროცესი, რომელიც მოიცავს ციფრული ტექნოლოგიების გამოყენებას ბიზნესის ყველა ასპექტში, როგორც პროდუქტის ან სერვისის მიწოდებაში, ასევე მომხმარებელთან კომუნიკაციასა და შიდა ოპერაციებში. ეს პროცესი მოიცავს როგორც ტექნოლოგიურ სიახლეებს, ისე ორგანიზაციული კულტურისა და სამუშაო პროცესების გარდაქმნას, რათა მომხმარებლამდე მივიდეს მაქსიმალური შედეგი და ღირებულება.</p>

      <h2>რატომ არის აუცილებელი?</h2>

      <h3>მომხმარებელთან ეფექტური კომუნიკაცია</h3>

      <p>ციფრული პლატფორმები და AI ტექნოლოგიები საშუალებას აძლევს კომპანიებს სწრაფად და პერსონალიზებულად დაუკავშირდნენ მომხმარებელს. მაგალითად, AI ჩატბოტები 24/7 პასუხობენ კითხვებს და აფართოებენ მხარდაჭერის შესაძლებლობებს, რაც ზრდის მომხმარებელტა ნდობასა და ინტერესს.</p>

      <h3>ოპერაციული ეფექტურობა</h3>

      <p>მონაცემთა ანალიზი, ავტომატიზაცია და თანამედროვე ინსტრუმენტები აუმჯობესებს სამუშაო პროცესებს, ამცირებს ხარჯებს და ზრდის ეფექტურობას. კომპანიები უკეთ აღიქვამენ ხარვეზებს და მარტივად რეაგირებენ მასზე.</p>

      <h3>ინოვაცია და კონკურენტუნარიანობა</h3>

      <p>ციფრული ტრანსფორმაცია საშუალებას აძლევს კომპანიებს შექმნან ახალი პროდუქტები და სერვისები, რაც ზრდის კონკურენტულ უპირატესობას და მომხმარებლის ჩართულობას.</p>

      <h2>AI და თანამედროვე ტექნოლოგიები</h2>

      <p>ხელოვნური ინტელექტი უკვე მნიშვნელოვან როლს თამაშობს ციფრულ ტრანსფორმაციაში. AI ჩატბოტები, ავტომატური სისტემები და მონაცემთა ანალიზის ინსტრუმენტები ბიზნესს ეხმარება მომხმარებლის საჭიროებების სწრაფად გაგებაში, პერსონალიზებულ მომსახურებაში და პროცესების გამარტივებაში. თანამედროვე ტექნოლოგიები კომპანიებს აძლევს საშუალებას უფრო ეფექტურად მოემსახურონ მომხმარებელს და სწრაფად უპასუხონ ბაზრის ცვლილებებს.</p>

      <h2>დასკვნა</h2>

      <p>ციფრული ტრანსფორმაცია აღარ არის მხოლოდ შესაძლებლობა – ეს არის სტანდარტი, რომელიც განსაზღვრავს თანამედროვე ბიზნესის წარმატებას. კომპანიები, რომლებიც ადაპტირდებიან ციფრულ სამყაროსთან, ზრდიან მომხმარებელთა ნდობას, ოპერაციულ ეფექტურობას და ინოვაციურ შესაძლებლობებს. AI და თანამედროვე პლატფორმები შექმნიან პირობებს, სადაც ეფექტური კომუნიკაცია, სწრაფი გადაწყვეტილებები და ინოვაცია ერთმანეთს ავსებს, უზრუნველყოფენ კომპანიის მდგრად განვითარებას და კონკურენტუნარიანობას.</p>
    `,
    publishedAt: '2025-01-16T10:00:00Z',
    thumbnail: '/statia-1.jpg',
    author: {
      name: 'Vifa Digital Team',
      avatar: '/images/team/vifa-team.jpg',
    },
    tags: ['ციფრული ტრანსფორმაცია', 'ბიზნეს სტრატეგია', 'AI', 'მოდერნიზაცია', 'ტექნოლოგია'],
    readingTime: 4,
    seo: {
      title: 'ბიზნესის ციფრული ტრანსფორმაცია – თანამედროვე სამყაროში აუცილებლობა',
      description: 'ციფრული ტრანსფორმაცია აღარ არის არჩევანი, არამედ აუცილებლობა. შეიტყვეთ როგორ შეცვალოთ თქვენი ბიზნეს AI ტექნოლოგიებისა და ციფრული სტრატეგიების საშუალებით.',
      ogImage: '/statia-1.jpg',
    },
  },
  {
    slug: 'ai-biznesshi-strategiuli-innovaciebi',
    title: 'ხელოვნური ინტელექტი ბიზნესში: თანამედროვე სტრატეგიული ინოვაციები',
    description: 'AI აღარ არის მხოლოდ ფუტურისტული კონცეფცია, არამედ პრაქტიკული ინსტრუმენტი, რომელიც ფუნდამენტურად ცვლის კომპანიების ოპერაციულ მოდელებს.',
    content: `
      <p class="lead">თანამედროვე ბიზნეს გარემოში ხელოვნური ინტელექტი (AI) აღარ წარმოადგენს მხოლოდ ფუტურისტულ კონცეფციას, არამედ გახდა პრაქტიკული ინსტრუმენტი, რომელიც ფუნდამენტურად ცვლის კომპანიების ოპერაციულ მოდელებს, ზრდის ეფექტურობას და აუმჯობესებს მომხმარებელთან ურთიერთობას.</p>

      <p>წამყვანი გლობალური კომპანიები, როგორიცაა Google და Amazon, წარმატებით ინტეგრირებენ AI-ს ყოველდღიურ პროცესებში, რაც მათ მნიშვნელოვან კონკურენტულ უპირატესობას ანიჭებს. საქართველოს ბაზარზე, სადაც ციფრული ტრანსფორმაცია სწრაფი ტემპებით მიმდინარეობს, AI-ის დანერგვა ლოკალურ ბიზნესებს დაეხმარება გლობალურ სტანდარტებთან ადაპტაციაში და კონკურენტუნარიანობის გაძლიერებაში.</p>

      <h2>AI-ის განმარტება ბიზნეს კონტექსტში</h2>

      <p>ხელოვნური ინტელექტი წარმოადგენს ტექნოლოგიების კომპლექსურ ერთობლიობას, რომელიც მანქანებს საშუალებას აძლევს შეასრულონ ამოცანები ადამიანური ინტელექტის მსგავსად. ბიზნესში ეს მოიცავს მანქანურ სწავლებას (Machine Learning), ბუნებრივი ენის დამუშავებას (NLP) და ავტომატიზებულ სისტემებს.</p>

      <p>AI-ს შეუძლია დიდი მოცულობის მონაცემების სწრაფი ანალიზი, ბაზრის ტენდენციების პროგნოზირება და რუტინული პროცესების ავტომატიზაცია. ეს ათავისუფლებს ადამიანურ რესურსებს უფრო სტრატეგიული და კრეატიული ამოცანებისთვის, რაც ხელს უწყობს კომპანიის გრძელვადიან ზრდას.</p>

      <h2>AI-ის ძირითადი აპლიკაციები ბიზნესში</h2>

      <p>AI-ის ადაპტაცია შესაძლებელია სხვადასხვა ინდუსტრიაში, საცალო ვაჭრობიდან დაწყებული მაღალტექნოლოგიური სერვისებით დამთავრებული.</p>

      <h3>მომხმარებელთა მომსახურება და კომუნიკაცია</h3>

      <p>AI-ზე დაფუძნებული ჩატბოტები და ვირტუალური ასისტენტები რევოლუციურად ცვლიან მომხმარებელთან ურთიერთობას. ისინი უზრუნველყოფენ 24/7 მხარდაჭერას, პასუხობენ შეკითხვებს, იღებენ შეკვეთებს და წყვეტენ პრობლემებს რეალურ დროში. სოციალურ პლატფორმებზე (როგორიცაა Facebook, Instagram და WhatsApp) ისინი გვთავაზობენ პერსონალიზებულ პასუხებს, რაც ზრდის მომხმარებელთა კმაყოფილებას.</p>

      <p><strong>ფაქტი:</strong> Gartner-ის პროგნოზით, 2026 წლისთვის საუბრობრივი AI კონტაქტ ცენტრებში აგენტების შრომით ხარჯებს 80 მილიარდ დოლარამდე შეამცირებს. ეს განსაკუთრებით სასარგებლოა მცირე და საშუალო ბიზნესებისთვის, რომლებსაც შეუძლიათ მინიმალური რესურსებით უზრუნველყონ მაღალი დონის მომსახურება.</p>

      <h3>მონაცემთა ანალიზი და პროგნოზირება</h3>

      <p>ხელოვნური ინტელექტი ეფექტურად აგროვებს, ამუშავებს და აანალიზებს უზარმაზარ მონაცემებს გაყიდვების, მომხმარებელთა ქცევისა და ბაზრის ტენდენციების შესახებ. ეს საშუალებას აძლევს ბიზნესებს ზუსტად იწინასწარმეტყველონ მომავალი ტენდენციები, გამოთვალონ მოთხოვნის პიკური პერიოდები და მიიღონ მონაცემებზე დაფუძნებული გადაწყვეტილებები, რაც ზრდის ეფექტურობას, ამცირებს ხარჯებს და ხელს უწყობს კონკურენტულ უპირატესობას.</p>

      <p><strong>მაგალითად,</strong> Netflix იყენებს AI-ს პერსონალიზებული რეკომენდაციებისთვის, რომელიც აანალიზებს მომხმარებელთა ყურების ისტორიას, პრეფერენციებსა და ქცევით პატერნებს. McKinsey-ის კვლევის მიხედვით, პლატფორმაზე ნანახი კონტენტის 75% სწორედ ასეთი რეკომენდაციებიდან მოდის, რაც კომპანიას წელიწადში 1 მილიარდ დოლარზე მეტს უზოგავს მომხმარებელთა შენარჩუნებაში.</p>

      <h3>მარკეტინგი და პერსონალიზაცია</h3>

      <p>AI ქმნის მიზანმიმართულ სარეკლამო კამპანიებს მომხმარებელთა ქცევის ანალიზის საფუძველზე. ჩატბოტები და ალგორითმები სთავაზობენ შესაბამის კონტენტსა და პროდუქტებს, რაც პირდაპირ ზრდის გაყიდვებს და ლოიალობას.</p>

      <h2>AI-ის უპირატესობები და გამოწვევები</h2>

      <h3>უპირატესობები:</h3>

      <ul>
        <li><strong>ხარჯების შემცირება:</strong> ავტომატიზაცია საოპერაციო ხარჯებს ამცირებს საშუალოდ 31%-ით მომდევნო სამი წლის განმავლობაში, Deloitte-ის კვლევის თანახმად.</li>
        <li><strong>სწრაფი გადაწყვეტილებები:</strong> AI მონაცემებს წამებში აანალიზებს, რაც აჩქარებს მენეჯმენტის პროცესებს.</li>
        <li><strong>კონკურენტუნარიანობა:</strong> AI-ის მქონე ინდუსტრიებში პროდუქტიულობა იზრდება ოთხჯერ უფრო სწრაფად, PwC-ის ანალიზის მიხედვით.</li>
        <li><strong>სოციალური მედიის ჩართულობა:</strong> AI-ჩატბოტები აუმჯობესებენ ბრენდის იმიჯს და ზრდიან გაყიდვებს მყისიერი პასუხებით.</li>
      </ul>

      <h3>გამოწვევები:</h3>

      <ul>
        <li><strong>უსაფრთხოება:</strong> აუცილებელია მონაცემთა დაცვის სტანდარტების (მაგალითად, GDPR) დაცვა.</li>
        <li><strong>ინტეგრაცია და ინვესტიცია:</strong> საჭიროა თანამშრომელთა ტრენინგი და საწყისი დანახარჯები.</li>
      </ul>

      <h2>როგორ დავიწყოთ AI-ის დანერგვა თქვენს ბიზნესში?</h2>

      <h3>საჭიროებების შეფასება</h3>
      <p>გაანალიზეთ, სად არის ავტომატიზაციის საჭიროება ყველაზე მეტად. თუ პრიორიტეტი მომხმარებელთა კომუნიკაციაა, დაიწყეთ ჩატბოტებით სოციალურ მედიაში.</p>

      <h3>ინსტრუმენტების შერჩევა</h3>
      <p>გამოიყენეთ პლატფორმები, როგორიცაა ChatGPT, Dialogflow ან სპეციალიზებული სერვისები, რომლებიც ინტეგრირდება Facebook-თან და Instagram-თან.</p>

      <h3>ტესტირება და გაფართოება</h3>
      <p>დაიწყეთ პილოტური პროექტით, გაზომეთ ROI და გააფართოვეთ წარმატების შემთხვევაში.</p>

      <h3>ექსპერტებთან თანამშრომლობა</h3>
      <p>თუ შიდა რესურсები არ გაქვთ, მიმართეთ სპეციალისტებს უსაფრთხო დანერგვისთვის.</p>

      <h2>დასკვნა</h2>

      <p>ხელოვნური ინტელექტი ბიზნესში მდგრადი ზრდისა და ინოვაციების გასაღებია. ის არა მხოლოდ ზრდის ეფექტურობას და ამცირებს ხარჯებს, არამედ ქმნის ახალ შესაძლებლობებს მომხმარებელთა ჩართულობისთვის, განსაკუთრებით სოციალურ მედიაში. თუ თქვენი ბიზნეს ჯერ არ იყენებს AI-ს, დროა იმოქმედოთ – ეს აუცილებლობაა კონკურენტუნარიანობის შესანარჩუნებლად.</p>
    `,
    publishedAt: '2025-10-17T12:00:00Z',
    thumbnail: '/statia-2.jpg',
    author: {
      name: 'Vifa Digital Team',
      avatar: '/images/team/vifa-team.jpg',
    },
    tags: ['ხელოვნური ინტელექტი', 'AI', 'ბიზნეს სტრატეგია', 'ციფრული მარკეტინგი', 'ტექნოლოგია'],
    readingTime: 7,
    seo: {
      title: 'ხელოვნური ინტელექტი ბიზნესში - AI სტრატეგიული ინოვაციები',
      description: 'ხელოვნური ინტელექტი (AI) აღარ არის მხოლოდ ფუტურისტული კონცეფცია. შეიტყვეთ როგორ ინტეგრირება AI-ს ბიზნესში ეფექტურობისა და კონკურენტუნარიანობის გასაძლიერებლად.',
      ogImage: '/statia-2.jpg',
    },
  }
];

// Get all blog posts
export async function getAllBlogPosts(): Promise<BlogPostMetadata[]> {
  // Return blog posts sorted by date (newest first)
  return blogPosts.map(post => ({
    slug: post.slug,
    title: post.title,
    description: post.description,
    publishedAt: post.publishedAt,
    updatedAt: post.updatedAt,
    thumbnail: post.thumbnail,
    author: post.author,
    tags: post.tags,
    readingTime: post.readingTime,
    seo: post.seo,
  })).sort((a, b) =>
    new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime()
  );
}

// Get a single blog post by slug
export async function getBlogPostBySlug(slug: string): Promise<BlogPost | null> {
  // Find the blog post by slug
  const post = blogPosts.find(p => p.slug === slug);

  if (!post) {
    return null;
  }

  // Return the full blog post
  return post;
}

